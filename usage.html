<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Usage - mdbook-repl</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="assets/css/patch.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Basics</li><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Intro</a></li><li class="chapter-item expanded "><a href="usage.html" class="active"><strong aria-hidden="true">2.</strong> Usage</a></li><li class="chapter-item expanded "><a href="limitations.html"><strong aria-hidden="true">3.</strong> Limitations</a></li><li class="chapter-item expanded "><a href="for-developers.html"><strong aria-hidden="true">4.</strong> For Developers</a></li><li class="chapter-item expanded affix "><li class="part-title">Languages</li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> Python</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="python/intro.html"><strong aria-hidden="true">5.1.</strong> Intro</a></li><li class="chapter-item "><a href="python/examples.html"><strong aria-hidden="true">5.2.</strong> Examples</a></li><li class="chapter-item "><a href="python/packages.html"><strong aria-hidden="true">5.3.</strong> Packages</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> Typescript</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="typescript/intro.html"><strong aria-hidden="true">6.1.</strong> Intro</a></li><li class="chapter-item "><a href="typescript/examples.html"><strong aria-hidden="true">6.2.</strong> Examples</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">7.</strong> Javascript</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="javascript/intro.html"><strong aria-hidden="true">7.1.</strong> Intro</a></li><li class="chapter-item "><a href="javascript/examples.html"><strong aria-hidden="true">7.2.</strong> Examples</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">8.</strong> Lua</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="lua/intro.html"><strong aria-hidden="true">8.1.</strong> Intro</a></li><li class="chapter-item "><a href="lua/examples.html"><strong aria-hidden="true">8.2.</strong> Examples</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">mdbook-repl</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/MR-Addict/mdbook-repl" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/MR-Addict/mdbook-repl/edit/main/docs/src/usage.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Custom REPL Style -->
<style>
  .repl {
    margin-block: 2rem;
    position: relative;
    isolation: isolate;
  }
  .repl iframe {
    width: 100%;
    height: 100%;
    border: none;
  }
  .repl iframe.hide {
    top: 0;
    left: 0;
    opacity: 0;
    position: absolute;
    pointer-events: none;
    z-index: -1;
  }
</style>
<h1 id="usage"><a class="header" href="#usage">Usage</a></h1>
<p>This preprocessor is designed to be used with <a href="https://rust-lang.github.io/mdBook">mdbook</a>. If you want to use this repl in your own web project, you can have a look at <a href="for-developers.html">For Developers</a> section.</p>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<p>There two ways to install this preprocessor.</p>
<p>You can install it with <strong>cargo</strong> if you have <a href="https://www.rust-lang.org">rust</a> installed:</p>
<pre><code class="language-sh">cargo install mdbook-repl
</code></pre>
<p>Or you can download the pre built <strong>binary</strong> from <a href="https://github.com/MR-Addict/mdbook-repl/releases">github release page</a>. You should put the binary in your machine's <strong>PATH</strong> after installation.</p>
<p>You can check your installation by running:</p>
<pre><code class="language-sh">mdbook-repl --version
</code></pre>
<h2 id="configuration"><a class="header" href="#configuration">Configuration</a></h2>
<p>After installation, you need to add some configurations to your <strong>book.toml</strong> file. Below is an example of the full configuration options for this preprocessor:</p>
<pre><code class="language-toml">[preprocessor.repl]
# iframe url, default is https://mr-addict.github.io/mdbook-repl/embed/
src = "https://mr-addict.github.io/mdbook-repl/embed/"

# python is disabled by default and loading is lazy
python.enable = true
python.loading = "lazy"

# typescript is disabled by default and loading is lazy
typescript.enable = true
typescript.loading = "lazy"

# javascript is disabled by default and loading is lazy
javascript.enable = true
javascript.loading = "lazy"
</code></pre>
<ul>
<li><strong>src</strong>: The url of the repl iframe, the default value is <a href="https://mr-addict.github.io/mdbook-repl/embed/">https://mr-addict.github.io/mdbook-repl/embed/</a>. You can also deploy your own repl server for better performance, see <a href="for-developers.html">For Developers</a> section.</li>
<li><strong>language.enable</strong>: Enable the language for the repl, default value is <strong>false</strong>.</li>
<li><strong>language.loading</strong>: The loading of the language, can be <strong>eager</strong> or <strong>lazy</strong>, default value is <strong>lazy</strong>.</li>
</ul>
<p>For example if you only care about python codeblock, you can only enable python and disable the others:</p>
<pre><code class="language-toml">[preprocessor.repl]
python.enable = true
</code></pre>
<h2 id="options"><a class="header" href="#options">Options</a></h2>
<p>You can also specific some options for the each codeblock.</p>
<p><strong>readonly</strong></p>
<p>readonly option will make the codeblock not editable. You can use this option if you want to show some code examples that should not be changed.</p>
<pre><code class="language-markdown">&#96;&#96;&#96;javascript,readonly
// javascript codeblock

console.log("Hello, world!");
&#96;&#96;&#96;</code></pre>
<p>And the codeblock will not be eidtable:</p>
<div class="repl" data-id="b8a55afe-2bc9-4bd3-ab84-52e0b554c3a2" data-readonly="true" data-lang="javascript">
  <iframe
    class="hide"
    loading="lazy"
    name="mdbook-javascript-repl"
    allow="clipboard-write; fullscreen"
    src="https://mr-addict.github.io/mdbook-repl/embed/"
  ></iframe>
</div>
<pre><code class="language-javascript">// javascript codeblock

console.log("Hello, world!");
</code></pre>
<p><strong>norepl</strong></p>
<p>norepl option will make the codeblock not rendered by the preprocessor. You can use this option if you want to show some code examples that should not be executed.</p>
<pre><code class="language-markdown">&#96;&#96;&#96;javascript,norepl
// javascript codeblock

console.log("Hello, world!");
&#96;&#96;&#96;</code></pre>
<p>And it will not be rendered by this preprocessor:</p>
<pre><code class="language-javascript">// javascript codeblock

console.log("Hello, world!");
</code></pre>
<h2 id="shortcuts"><a class="header" href="#shortcuts">Shortcuts</a></h2>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left"><strong>Shortcut</strong></th><th style="text-align: left"><strong>Description</strong></th></tr></thead><tbody>
<tr><td style="text-align: left">Ctrl + R</td><td style="text-align: left">Run the codeblock and show the result.</td></tr>
<tr><td style="text-align: left">Ctrl + L</td><td style="text-align: left">Clear the output of the codeblock.</td></tr>
</tbody></table>
</div>
<h2 id="language-extensions"><a class="header" href="#language-extensions">Language Extensions</a></h2>
<p>This preprocessor only recongnizes specific extensions for sepecific language. For example, you can only use <strong>python</strong> or <strong>py</strong> codeblock for python code.</p>
<p>Here is the full list of extensions:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Language</th><th style="text-align: left">Extensions</th></tr></thead><tbody>
<tr><td style="text-align: left">Python</td><td style="text-align: left">python, py</td></tr>
<tr><td style="text-align: left">TypeScript</td><td style="text-align: left">typescript, ts</td></tr>
<tr><td style="text-align: left">JavaScript</td><td style="text-align: left">javascript, js</td></tr>
</tbody></table>
</div>
<h2 id="performance"><a class="header" href="#performance">Performance</a></h2>
<p>There is no doubt that the execution of the code is really fast compared with backend server playgrounds. However, the bottleneck is the loading time of the codeblock. The loading time is depending on language.</p>
<p>The smallest one is <strong>javascrpt</strong>, because javascipt is natively supported by the browser. However others languages like python and typescript need some complied webassembly runtime to be loaded first.</p>
<p>So the loading option is <strong>lazy</strong> and all lanugages are disabled by default. Also, most of the examples in this docs are using <strong>javascript</strong> by default to make the loading time faster.</p>
<p>Below is the relative size of the extra needed runtime for each language:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Language</th><th style="text-align: left">Size</th></tr></thead><tbody>
<tr><td style="text-align: left">Python</td><td style="text-align: left">5.5MB</td></tr>
<tr><td style="text-align: left">TypeScript</td><td style="text-align: left">718kb</td></tr>
<tr><td style="text-align: left">JavaScript</td><td style="text-align: left">0</td></tr>
</tbody></table>
</div><!-- Custom REPL Script -->
<script>
  document.querySelectorAll(".repl").forEach((replElement) => {
    const iframeElement = replElement.querySelector("iframe");
    const id = replElement.getAttribute("data-id");
    const lang = replElement.getAttribute("data-lang");
    const code = getCode(replElement.nextElementSibling);
    const readonly = replElement.getAttribute("data-readonly") === "true";
    let theme = mapTheme(localStorage.getItem("mdbook-theme") || document.querySelector(".theme.theme-selected")?.id);
    const postmessage = (msg) => iframeElement.contentWindow.postMessage({ repl: msg }, "*");
    function mapTheme(bookTheme) {
      return bookTheme === "light" || bookTheme === "rust" ? "light" : "dark";
    }
    function getCode(element) {
      // remove all the boring elements
      const code = element.cloneNode(true);
      code.querySelectorAll(".boring").forEach((boring) => boring.remove());
      return code.innerText.trim();
    }
    window.addEventListener("message", (event) => {
      const repl = event.data.repl;
      if (event.source === window || !repl) return;
      // if the id is empty, then it's the first time the iframe is loaded
      if (repl.id === "") {
        postmessage({ id, editor: { theme, lang, code, readonly, defaultCode: code } });
        return;
      }
      if (repl.id !== id) return;
      // update the iframe height
      replElement.style.height = repl.dimensions.height + "px";
      // show the iframe and hide the pre element
      iframeElement.classList.remove("hide");
      replElement.nextElementSibling.style.display = "none";
    });
    // listen to theme change
    document.querySelectorAll("button[role='menuitem'].theme").forEach((btn) => {
      btn.addEventListener("click", (event) => {
        theme = mapTheme(event.target.id);
        postmessage({ id, editor: { theme } });
      });
    });
  });
</script>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="limitations.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="limitations.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
